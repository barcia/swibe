export default function Swibe(e){const t={menu:"swibe-menu",trigger:"swibe-menu-trigger",state:"closed",width:300,time:300,breakpoint:void 0,shadowOpacity:.5,zIndex:999},s=Object.assign(t,e);let i;document.addEventListener("DOMContentLoaded",function(){a.get()&&(a.init(),s.breakpoint?(n.match(n.mediaQueryList),n.mediaQueryList.addListener(n.match)):a.addListeners())});const n={mediaQueryList:window.matchMedia("(max-width: "+s.breakpoint+"px)"),match(e){e.matches?a.addListeners():a.removeListeners()}},l={get(){return this.element=document.getElementById(s.menu),!!this.element},base(){this.element.style.position="fixed",this.element.style.top=0,this.element.style.left=-s.width+"px",this.element.style.width=s.width+"px",this.element.style.maxWidth="calc(100vw - 40px)",this.element.style.height="100vh",this.element.style.transition="left ease-in-out",this.element.style.transitionDuration=s.time+"ms",this.element.style.willChange="left",this.element.style.overflowY="auto",this.element.style.zIndex=s.zIndex},open(){this.element.style.left=0,this.element.setAttribute("data-state","open")},close(){this.element.style.left=-s.width+"px",this.element.setAttribute("data-state","closed")}},h={get(){return this.element=document.getElementById(s.trigger),!!this.element},tap(){i?a.close():a.open()}},o={create(){return this.element=document.createElement("div"),this.element.id=s.menu+"-shadow",this.element.style.position="fixed",this.element.style.backgroundColor="hsl(0, 0%, 0%)",this.element.style.top=0,this.element.style.left=0,this.element.style.zIndex=s.zIndex-1,this.element.addEventListener("click",a.close),document.body.appendChild(this.element),!0},enable(){return this.element.style.width="100vw",this.element.style.height="100vh",this.element.style.opacity=s.shadowOpacity,this.element.style.transition="opacity ease-in-out, height step-start, width step-start",this.element.style.transitionDuration=s.time+"ms",this.element.setAttribute("data-state","enabled"),!0},disable(){return this.element.style.width=0,this.element.style.height=0,this.element.style.opacity=0,this.element.style.transition="opacity ease-in-out, height step-end, width step-end",this.element.style.transitionDuration=s.time+"ms",this.element.setAttribute("data-state","disabled"),!0}},d={tap(e){let t=e.touches[0];return this.tapX=t.clientX,this.tapY=t.clientY,this.slideX=this.tapX,this.slideY=this.tapY,!0},slide(e){let t=e.touches[0];return this.slideX=t.clientX,this.slideY=t.clientY,i?!!d.gre.close(this.tapX,this.tapY,this.slideX,this.slideY)&&(a.close(),!0):!!d.gre.open(this.tapX,this.tapY,this.slideX,this.slideY)&&(a.open(),!0)},gre:{open(e,t,s,i){return this.openCond1=e<20,this.openCond2=s>e,!(!this.openCond1||!this.openCond2)},close(e,t,s,i){return this.distX=this.calcDist(e,s),this.distY=this.calcDist(t,i),this.angle=this.calcAngle(this.distX,this.distY),this.closeCond1=s<e,this.closeCond2=this.distY<280,this.closeCond3=this.distX<-30,this.closeCond4=this.angle>55,this.closeCond5=this.angle<125,!!(this.closeCond1&&this.closeCond2&&this.closeCond3&&this.closeCond4&&this.closeCond5)},calcDist:(e,t)=>t-e,calcAngle:(e,t)=>180*Math.atan(t/e)/Math.PI+90}},a={get:()=>!!(l.get()&&h.get()&&o.create())||(console.warn("Swibe items not loaded"),!1),addListeners(){h.element.addEventListener("click",h.tap,!1),document.addEventListener("touchstart",d.tap,!1),document.addEventListener("touchmove",d.slide,!1)},removeListeners(){h.element.removeEventListener("click",h.tap,!1),document.removeEventListener("touchstart",d.tap,!1),document.removeEventListener("touchmove",d.slide,!1)},init(){l.base(),"closed"==s.state?a.close():a.open()},open(){l.open(),o.enable(),i=!0},close(){l.close(),o.disable(),i=!1}}};