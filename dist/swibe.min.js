!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Swibe=e()}(this,(function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var e={open:function(t){var e=t.startX,i=t.endX;return this.openCond1=e<20,this.openCond2=i>e,!(!this.openCond1||!this.openCond2)},close:function(t){var e=t.startX,i=t.startY,n=t.endX,s=t.endY;return this.distX=n-e,this.distY=s-i,this.angle=180*Math.atan(this.distY/this.distX)/Math.PI+90,this.closeCond1=n<e,this.closeCond2=this.distY<280,this.closeCond3=this.distX<-30,this.closeCond4=this.angle>55,this.closeCond5=this.angle<125,!!(this.closeCond1&&this.closeCond2&&this.closeCond3&&this.closeCond4&&this.closeCond5)}},i=function(){function e(t){var i=t.menuID,n=void 0===i?"swibe-menu":i,s=t.triggerID,o=void 0===s?"swibe-menu-trigger":s,l=t.width,a=void 0===l?"300px":l,h=t.transition,c=void 0===h?"300ms":h,d=t.shadowOpacity,r=void 0===d?.5:d,u=t.zIndex,m=void 0===u?999:u,f=t.breakpoint,p=void 0===f?void 0:f,y=t.disableCallback,v=void 0===y?void 0:y,b=t.enableCallback,w=void 0===b?void 0:b,C=t.openCallback,k=void 0===C?void 0:C,g=t.closeCallback,I=void 0===g?void 0:g;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.menuID=n,this.triggerID=o,this.state=!1,this.width=a,this.transition=c,this.shadowOpacity=r,this.zIndex=m,this.breakpoint=p,this.disableCallback=v,this.enableCallback=w,this.openCallback=k,this.closeCallback=I}var i,h,c;return i=e,(h=[{key:"init",value:function(){var t=this;if(s.init(this),n.init(this),s.element&&n.element){if(o.init(this),n.element.addEventListener("click",(function(){return t.toggle()})),o.element.addEventListener("click",(function(){return t.close()})),this.breakpoint){var e=window.matchMedia("(max-width: ".concat(this.breakpoint,")")),i=function(){return e.matches?t._enable(t):t._disable(t)};i(),e.addListener(i)}else this._enable(this);document.addEventListener("keydown",(function(e){t.state&&"Escape"===e.key&&t.close()}))}}},{key:"_enable",value:function(){var t=this;"function"==typeof this.enableCallback&&this.enableCallback(),document.addEventListener("touchstart",(function(t){return l.touchstart(t)})),document.addEventListener("touchmove",(function(e){return t._tactileHandlerAction(e)}))}},{key:"_disable",value:function(){var t=this;this.close(),"function"==typeof this.disableCallback&&this.disableCallback(),document.removeEventListener("touchstart",(function(t){return l.touchstart(t)})),document.removeEventListener("touchmove",(function(e){return t._tactileHandlerAction(e)}))}},{key:"_tactileHandlerAction",value:function(t){this.state?l.close(t)&&this.close():l.open(t)&&this.open()}},{key:"open",value:function(){s.open(),n.open(),o.open(),a.open(),this.state=!0,"function"==typeof this.openCallback&&this.openCallback()}},{key:"close",value:function(){s.close(),n.close(),o.close(),a.close(),this.state=!1,"function"==typeof this.closeCallback&&this.closeCallback()}},{key:"toggle",value:function(){this.state?this.close():this.open()}}])&&t(i.prototype,h),c&&t(i,c),e}(),n={init:function(t){var e=t.menuID,i=t.triggerID;this.element=document.querySelector("#".concat(i)),this.element&&(this.element.setAttribute("aria-controls",e),this.element.setAttribute("aria-haspopup",!0),this.element.setAttribute("aria-expanded",!1))},open:function(){this.element.setAttribute("aria-expanded",!0)},close:function(){this.element.setAttribute("aria-expanded",!1)}},s={init:function(t){var e=t.menuID,i=t.width,n=t.transition,s=t.zIndex,o=t.triggerID;this.width=i,this.element=document.querySelector("#".concat(e)),this.element&&(this.element.style.position="fixed",this.element.style.top=0,this.element.style.left="-".concat(this.width),this.element.style.width=this.width,this.element.style.maxWidth="calc(100vw - 40px)",this.element.style.height="100vh",this.element.style.transition="left ease-in-out",this.element.style.transitionDuration=n,this.element.style.willChange="left",this.element.style.overflowY="auto",this.element.style.zIndex=s,this.element.setAttribute("aria-hidden",!0),this.element.setAttribute("aria-labelledby",o))},open:function(){this.element.style.left=0,this.element.setAttribute("aria-hidden",!1)},close:function(){this.element.style.left="-".concat(this.width),this.element.setAttribute("aria-hidden",!0)}},o={init:function(t){var e=t.menuID,i=t.zIndex,n=t.shadowOpacity,s=t.transition;this.menuID=e,this.zIndex=i,this.shadowOpacity=n,this.transition=s,this.element=document.createElement("div"),this.element.id="".concat(this.menuID,"-shadow"),this.element.style.position="fixed",this.element.style.backgroundColor="hsl(0, 0%, 0%)",this.element.style.top=0,this.element.style.left=0,this.element.style.zIndex=this.zIndex-1,this.element.setAttribute("aria-hidden",!0),document.body.appendChild(this.element)},open:function(){this.element.style.width="100vw",this.element.style.height="100vh",this.element.style.opacity=this.shadowOpacity,this.element.style.transition="opacity ease-in-out, height step-start, width step-start",this.element.style.transitionDuration=this.transition},close:function(){this.element.style.width=0,this.element.style.height=0,this.element.style.opacity=0,this.element.style.transition="opacity ease-in-out, height step-end, width step-end",this.element.style.transitionDuration=this.transition}},l={touchstart:function(t){this.tap=t.touches[0],this.startX=this.tap.clientX,this.startY=this.tap.clientY,this.endX=this.startX,this.endY=this.startY},touchmove:function(t){this.slide=t.touches[0],this.endX=this.slide.clientX,this.endY=this.slide.clientY},open:function(t){return this.touchmove(t),!!e.open(this)},close:function(t){return this.touchmove(t),!!e.close(this)}},a={open:function(){document.body.style.overflow="hidden"},close:function(){document.body.style.overflow="",document.body.style.overflow=null}};return i}));
