export default function Swibe(e){let t;const i={menu:"swibe-menu",trigger:"swibe-menu-trigger",breakpoint:void 0,width:300,time:300,shadowOpacity:.5,aria:!0,initialState:!1,selfClose:!1,zIndex:999},s=Object.assign(i,e);document.addEventListener("DOMContentLoaded",function(){n.load()&&n.init()});const n={load:()=>!(!l.get()||!o.get())||(console.warn("Swibe items not loaded"),!1),init(){return l.init(),o.init(),a.init(),s.breakpoint?(d.checkMediaQuery(d.mediaQuery),d.mediaQuery.addListener(d.checkMediaQuery)):this.addListeners(),0==s.initialState?n.close():n.open(),!0},addListeners:()=>(o.element.addEventListener("click",n.toggle,!1),document.addEventListener("touchstart",h.tap,!1),document.addEventListener("touchmove",h.slide,!1),document.addEventListener("keydown",h.keypress,!1),s.selfClose&&l.element.addEventListener("click",n.close,!1),!0),removeListeners:()=>(o.element.removeEventListener("click",n.toggle,!1),document.removeEventListener("touchstart",h.tap,!1),document.removeEventListener("touchmove",h.slide,!1),document.removeEventListener("keydown",h.keypress,!1),s.selfClose&&l.element.removeEventListener("click",n.close,!1),!0),open:()=>(l.open(),o.open(),a.open(),document.body.style.overflow="hidden",t=!0,!0),close:()=>(l.close(),o.close(),a.close(),document.body.style.overflow=null,t=!1,!0),toggle(){return this.state?n.close():n.open(),!0}},l={get(){return this.element=document.getElementById(s.menu),!!this.element},init(){return this.element.style.position="fixed",this.element.style.top=0,this.element.style.left=-s.width+"px",this.element.style.width=s.width+"px",this.element.style.maxWidth="calc(100vw - 40px)",this.element.style.height="100vh",this.element.style.transition="left ease-in-out",this.element.style.transitionDuration=s.time+"ms",this.element.style.willChange="left",this.element.style.overflowY="auto",this.element.style.zIndex=s.zIndex,s.aria&&this.element.setAttribute("aria-labelledby",s.trigger),!0},open(){return this.element.style.left=0,this.element.setAttribute("data-state",!0),s.aria&&this.element.setAttribute("aria-hidden",!1),!0},close(){return this.element.style.left=-s.width+"px",this.element.setAttribute("data-state",!1),s.aria&&this.element.setAttribute("aria-hidden",!0),!0}},o={get(){return this.element=document.getElementById(s.trigger),!!this.element},init(){return s.aria&&this.element.setAttribute("aria-controls",s.menu),s.aria&&this.element.setAttribute("aria-haspopup",!0),!0},open(){return this.element.setAttribute("data-state",!0),s.aria&&this.element.setAttribute("aria-expanded",!0),!0},close(){return this.element.setAttribute("data-state",!1),s.aria&&this.element.setAttribute("aria-expanded",!1),!0}},a={init(){return this.element=document.createElement("div"),this.element.id=s.menu+"-shadow",this.element.style.position="fixed",this.element.style.backgroundColor="hsl(0, 0%, 0%)",this.element.style.top=0,this.element.style.left=0,this.element.style.zIndex=s.zIndex-1,this.element.addEventListener("click",n.close),s.aria&&this.element.setAttribute("aria-hidden",!0),document.body.appendChild(this.element),!0},open(){return this.element.style.width="100vw",this.element.style.height="100vh",this.element.style.opacity=s.shadowOpacity,this.element.style.transition="opacity ease-in-out, height step-start, width step-start",this.element.style.transitionDuration=s.time+"ms",this.element.setAttribute("data-state",!0),!0},close(){return this.element.style.width=0,this.element.style.height=0,this.element.style.opacity=0,this.element.style.transition="opacity ease-in-out, height step-end, width step-end",this.element.style.transitionDuration=s.time+"ms",this.element.setAttribute("data-state",!1),!0}},h={tap(e){let t=e.touches[0];return this.tapX=t.clientX,this.tapY=t.clientY,this.slideX=this.tapX,this.slideY=this.tapY,!0},slide(e){let i=e.touches[0];return this.slideX=i.clientX,this.slideY=i.clientY,t?!!h.gre.close(this.tapX,this.tapY,this.slideX,this.slideY)&&(n.close(),!0):!!h.gre.open(this.tapX,this.tapY,this.slideX,this.slideY)&&(n.open(),!0)},keypress(e){"Escape"===e.key&&t&&n.close()},gre:{open(e,t,i,s){return this.openCond1=e<20,this.openCond2=i>e,!(!this.openCond1||!this.openCond2)},close(e,t,i,s){return this.distX=i-e,this.distY=s-t,this.angle=180*Math.atan(this.distY/this.distX)/Math.PI+90,this.closeCond1=i<e,this.closeCond2=this.distY<280,this.closeCond3=this.distX<-30,this.closeCond4=this.angle>55,this.closeCond5=this.angle<125,!!(this.closeCond1&&this.closeCond2&&this.closeCond3&&this.closeCond4&&this.closeCond5)}}},d={mediaQuery:window.matchMedia("(max-width: "+s.breakpoint+"px)"),checkMediaQuery:e=>(e.matches?n.addListeners():(n.close(),n.removeListeners()),!0)}};