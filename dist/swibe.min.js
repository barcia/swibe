!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Swibe",[],t):"object"==typeof exports?exports.Swibe=t():e.Swibe=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function s(e){var t,n=i({menu:"swibe-menu",trigger:"swibe-menu-trigger",breakpoint:void 0,width:300,time:300,shadowOpacity:.5,aria:!0,initialState:!1,selfClose:!1,zIndex:999},e);document.addEventListener("DOMContentLoaded",function(){s.load()&&s.init()});var s={load:function(){return!(!o.get()||!r.get())||(console.warn("Swibe items not loaded"),!1)},init:function(){return o.init(),r.init(),l.init(),n.breakpoint?(d.checkMediaQuery(d.mediaQuery),d.mediaQuery.addListener(d.checkMediaQuery)):this.addListeners(),0==n.initialState?s.close():s.open(),!0},addListeners:function(){return r.element.addEventListener("click",s.toggle,!1),document.addEventListener("touchstart",a.tap,!1),document.addEventListener("touchmove",a.slide,!1),document.addEventListener("keydown",a.keypress,!1),n.selfClose&&o.element.addEventListener("click",s.close,!1),!0},removeListeners:function(){return r.element.removeEventListener("click",s.toggle,!1),document.removeEventListener("touchstart",a.tap,!1),document.removeEventListener("touchmove",a.slide,!1),document.removeEventListener("keydown",a.keypress,!1),n.selfClose&&o.element.removeEventListener("click",s.close,!1),!0},open:function(){return o.open(),r.open(),l.open(),document.body.style.overflow="hidden",t=!0,!0},close:function(){return o.close(),r.close(),l.close(),document.body.style.overflow=null,t=!1,!0},toggle:function(){return this.state?s.close():s.open(),!0}},o={get:function(){return this.element=document.getElementById(n.menu),!!this.element},init:function(){return this.element.style.position="fixed",this.element.style.top=0,this.element.style.left=-n.width+"px",this.element.style.width=n.width+"px",this.element.style.maxWidth="calc(100vw - 40px)",this.element.style.height="100vh",this.element.style.transition="left ease-in-out",this.element.style.transitionDuration=n.time+"ms",this.element.style.willChange="left",this.element.style.overflowY="auto",this.element.style.zIndex=n.zIndex,n.aria&&this.element.setAttribute("aria-labelledby",n.trigger),!0},open:function(){return this.element.style.left=0,this.element.setAttribute("data-state",!0),n.aria&&this.element.setAttribute("aria-hidden",!1),!0},close:function(){return this.element.style.left=-n.width+"px",this.element.setAttribute("data-state",!1),n.aria&&this.element.setAttribute("aria-hidden",!0),!0}},r={get:function(){return this.element=document.getElementById(n.trigger),!!this.element},init:function(){return n.aria&&this.element.setAttribute("aria-controls",n.menu),n.aria&&this.element.setAttribute("aria-haspopup",!0),!0},open:function(){return this.element.setAttribute("data-state",!0),n.aria&&this.element.setAttribute("aria-expanded",!0),!0},close:function(){return this.element.setAttribute("data-state",!1),n.aria&&this.element.setAttribute("aria-expanded",!1),!0}},l={init:function(){return this.element=document.createElement("div"),this.element.id=n.menu+"-shadow",this.element.style.position="fixed",this.element.style.backgroundColor="hsl(0, 0%, 0%)",this.element.style.top=0,this.element.style.left=0,this.element.style.zIndex=n.zIndex-1,this.element.addEventListener("click",s.close),n.aria&&this.element.setAttribute("aria-hidden",!0),document.body.appendChild(this.element),!0},open:function(){return this.element.style.width="100vw",this.element.style.height="100vh",this.element.style.opacity=n.shadowOpacity,this.element.style.transition="opacity ease-in-out, height step-start, width step-start",this.element.style.transitionDuration=n.time+"ms",this.element.setAttribute("data-state",!0),!0},close:function(){return this.element.style.width=0,this.element.style.height=0,this.element.style.opacity=0,this.element.style.transition="opacity ease-in-out, height step-end, width step-end",this.element.style.transitionDuration=n.time+"ms",this.element.setAttribute("data-state",!1),!0}},a={tap:function(e){var t=e.touches[0];return this.tapX=t.clientX,this.tapY=t.clientY,this.slideX=this.tapX,this.slideY=this.tapY,!0},slide:function(e){var n=e.touches[0];return this.slideX=n.clientX,this.slideY=n.clientY,t?!!a.gre.close(this.tapX,this.tapY,this.slideX,this.slideY)&&(s.close(),!0):!!a.gre.open(this.tapX,this.tapY,this.slideX,this.slideY)&&(s.open(),!0)},keypress:function(e){"Escape"===e.key&&t&&s.close()},gre:{open:function(e,t,n,i){return this.openCond1=e<20,this.openCond2=n>e,!(!this.openCond1||!this.openCond2)},close:function(e,t,n,i){return this.distX=n-e,this.distY=i-t,this.angle=180*Math.atan(this.distY/this.distX)/Math.PI+90,this.closeCond1=n<e,this.closeCond2=this.distY<280,this.closeCond3=this.distX<-30,this.closeCond4=this.angle>55,this.closeCond5=this.angle<125,!!(this.closeCond1&&this.closeCond2&&this.closeCond3&&this.closeCond4&&this.closeCond5)}}},d={mediaQuery:window.matchMedia("(max-width: "+n.breakpoint+"px)"),checkMediaQuery:function(e){return e.matches?s.addListeners():(s.close(),s.removeListeners()),!0}}}n.r(t),n.d(t,"default",function(){return s})}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Td2liZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vU3dpYmUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vU3dpYmUvLi9zcmMvc3dpYmUuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwid2luZG93IiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlN3aWJlIiwiY3VzdG9tQ29uZmlnIiwic3RhdGUiLCJjb25maWciLCJfZXh0ZW5kcyIsIm1lbnUiLCJ0cmlnZ2VyIiwiYnJlYWtwb2ludCIsInVuZGVmaW5lZCIsIndpZHRoIiwidGltZSIsInNoYWRvd09wYWNpdHkiLCJhcmlhIiwiaW5pdGlhbFN0YXRlIiwic2VsZkNsb3NlIiwiekluZGV4IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic3dpYmUiLCJsb2FkIiwiaW5pdCIsImNvbnNvbGUiLCJ3YXJuIiwic2hhZG93IiwicmVzcG9uc2l2ZSIsImNoZWNrTWVkaWFRdWVyeSIsIm1lZGlhUXVlcnkiLCJhZGRMaXN0ZW5lciIsInRoaXMiLCJhZGRMaXN0ZW5lcnMiLCJjbG9zZSIsIm9wZW4iLCJlbGVtZW50IiwidG9nZ2xlIiwiaW50ZXJhY3Rpb24iLCJ0YXAiLCJzbGlkZSIsImtleXByZXNzIiwicmVtb3ZlTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJtYXhXaWR0aCIsImhlaWdodCIsInRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ3aWxsQ2hhbmdlIiwib3ZlcmZsb3dZIiwic2V0QXR0cmlidXRlIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiYmFja2dyb3VuZENvbG9yIiwiYXBwZW5kQ2hpbGQiLCJvcGFjaXR5IiwiZXZlbnQiLCJ0b3VjaGVzIiwidGFwWCIsImNsaWVudFgiLCJ0YXBZIiwiY2xpZW50WSIsInNsaWRlWCIsInNsaWRlWSIsImdyZSIsIm9wZW5Db25kMSIsIm9wZW5Db25kMiIsImRpc3RYIiwiZGlzdFkiLCJhbmdsZSIsIk1hdGgiLCJhdGFuIiwiUEkiLCJjbG9zZUNvbmQxIiwiY2xvc2VDb25kMiIsImNsb3NlQ29uZDMiLCJjbG9zZUNvbmQ0IiwiY2xvc2VDb25kNSIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLFdBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsTUFBQUQsSUFFQUQsRUFBQSxNQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFQLFFBR0EsSUFBQUMsRUFBQUksRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FULFFBQUEsSUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFE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R0FPZixPQU5JQSxFQUFNdUIsUUFDVGhFLEVBQU1XLGdCQUVOWCxFQUFNWSxRQUNOWixFQUFNb0Isb0JBRUEiLCJmaWxlIjoic3dpYmUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJTd2liZVwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJTd2liZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJTd2liZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLyoqXG4gKiBTd2liZSAxLjEuMFxuICogTUlUIExpY2Vuc2VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iYXJjaWEvc3dpYmVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTd2liZShjdXN0b21Db25maWcpIHtcblxuXHRsZXQgc3RhdGU7XG5cblx0Y29uc3QgZGVmYXVsdENvbmZpZyA9IHtcblx0XHRtZW51OiBcInN3aWJlLW1lbnVcIixcblx0XHR0cmlnZ2VyOiBcInN3aWJlLW1lbnUtdHJpZ2dlclwiLFxuXHRcdGJyZWFrcG9pbnQ6IHVuZGVmaW5lZCwgLy8gcHhcblx0XHR3aWR0aDogMzAwLCAvLyBweFxuXHRcdHRpbWU6IDMwMCwgLy8gbXNcblx0XHRzaGFkb3dPcGFjaXR5OiAwLjUsIC8vIEJldHdlZW4gMCBhbmQgMVxuXHRcdGFyaWE6IHRydWUsXG5cdFx0aW5pdGlhbFN0YXRlOiBmYWxzZSxcblx0XHRzZWxmQ2xvc2U6IGZhbHNlLFxuXHRcdHpJbmRleDogOTk5XG5cdH07XG5cblx0Y29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q29uZmlnLCBjdXN0b21Db25maWcpO1xuXG5cblx0Ly8gSWYgYWxsIGVsZW1lbnRzIGV4aXN0cywgaW5pdCBhZnRlciB0aGUgRE9NIGlzIGxvYWRlZC5cblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzd2liZS5sb2FkKCkgJiYgc3dpYmUuaW5pdCgpO1xuXHR9KTtcblxuXG5cdGNvbnN0IHN3aWJlID0ge1xuXHRcdGxvYWQoKSB7XG5cdFx0XHRpZiAobWVudS5nZXQoKSAmJiB0cmlnZ2VyLmdldCgpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiU3dpYmUgaXRlbXMgbm90IGxvYWRlZFwiKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGluaXQoKSB7XG5cdFx0XHRtZW51LmluaXQoKTtcblx0XHRcdHRyaWdnZXIuaW5pdCgpO1xuXHRcdFx0c2hhZG93LmluaXQoKTtcblxuXHRcdFx0Ly8gQWRkIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0aWYgKGNvbmZpZy5icmVha3BvaW50KSB7XG5cdFx0XHRcdHJlc3BvbnNpdmUuY2hlY2tNZWRpYVF1ZXJ5KHJlc3BvbnNpdmUubWVkaWFRdWVyeSk7XG5cdFx0XHRcdHJlc3BvbnNpdmUubWVkaWFRdWVyeS5hZGRMaXN0ZW5lcihyZXNwb25zaXZlLmNoZWNrTWVkaWFRdWVyeSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuYWRkTGlzdGVuZXJzKCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBpbml0aWFsIHN0YXR1c1xuXHRcdFx0Y29uZmlnLmluaXRpYWxTdGF0ZSA9PSBmYWxzZSA/IHN3aWJlLmNsb3NlKCkgOiBzd2liZS5vcGVuKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdGFkZExpc3RlbmVycygpIHtcblx0XHRcdHRyaWdnZXIuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aWJlLnRvZ2dsZSwgZmFsc2UpO1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGludGVyYWN0aW9uLnRhcCwgZmFsc2UpO1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaW50ZXJhY3Rpb24uc2xpZGUsIGZhbHNlKTtcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGludGVyYWN0aW9uLmtleXByZXNzLCBmYWxzZSk7XG5cdFx0XHRjb25maWcuc2VsZkNsb3NlICYmIG1lbnUuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aWJlLmNsb3NlLCBmYWxzZSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdHJlbW92ZUxpc3RlbmVycygpIHtcblx0XHRcdHRyaWdnZXIuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aWJlLnRvZ2dsZSwgZmFsc2UpO1xuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGludGVyYWN0aW9uLnRhcCwgZmFsc2UpO1xuXHRcdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaW50ZXJhY3Rpb24uc2xpZGUsIGZhbHNlKTtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGludGVyYWN0aW9uLmtleXByZXNzLCBmYWxzZSk7XG5cdFx0XHRjb25maWcuc2VsZkNsb3NlICYmIG1lbnUuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aWJlLmNsb3NlLCBmYWxzZSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdG9wZW4oKSB7XG5cdFx0XHRtZW51Lm9wZW4oKTtcblx0XHRcdHRyaWdnZXIub3BlbigpO1xuXHRcdFx0c2hhZG93Lm9wZW4oKTtcblx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblx0XHRcdHN0YXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0Y2xvc2UoKSB7XG5cdFx0XHRtZW51LmNsb3NlKCk7XG5cdFx0XHR0cmlnZ2VyLmNsb3NlKCk7XG5cdFx0XHRzaGFkb3cuY2xvc2UoKTtcblx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBudWxsO1xuXHRcdFx0c3RhdGUgPSBmYWxzZTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0dG9nZ2xlKCkge1xuXHRcdFx0dGhpcy5zdGF0ZSA/IHN3aWJlLmNsb3NlKCkgOiBzd2liZS5vcGVuKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH07XG5cblxuXHRjb25zdCBtZW51ID0ge1xuXHRcdGdldCgpIHtcblx0XHRcdHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5tZW51KTtcblx0XHRcdHJldHVybiAodGhpcy5lbGVtZW50KSA/IHRydWUgOiBmYWxzZTtcblx0XHR9LFxuXHRcdGluaXQoKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuXHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLnRvcCA9IDA7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IC1jb25maWcud2lkdGggKyAncHgnO1xuXHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gY29uZmlnLndpZHRoICsgJ3B4Jztcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9ICdjYWxjKDEwMHZ3IC0gNDBweCknO1xuXHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICcxMDB2aCc7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdsZWZ0IGVhc2UtaW4tb3V0Jztcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBjb25maWcudGltZSArICdtcyc7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUud2lsbENoYW5nZSA9ICdsZWZ0Jztcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUuekluZGV4ID0gY29uZmlnLnpJbmRleDtcblx0XHRcdGNvbmZpZy5hcmlhICYmIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWxsZWRieScsIGNvbmZpZy50cmlnZ2VyKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0b3BlbigpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gMDtcblx0XHRcdHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCB0cnVlKTtcblx0XHRcdGNvbmZpZy5hcmlhICYmIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgZmFsc2UpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XHRjbG9zZSgpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gLWNvbmZpZy53aWR0aCArICdweCc7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXRlJywgZmFsc2UpO1xuXHRcdFx0Y29uZmlnLmFyaWEgJiYgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fTtcblxuXG5cdGNvbnN0IHRyaWdnZXIgPSB7XG5cdFx0Z2V0KCkge1xuXHRcdFx0dGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlnLnRyaWdnZXIpO1xuXHRcdFx0cmV0dXJuICh0aGlzLmVsZW1lbnQpID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdH0sXG5cdFx0aW5pdCgpIHtcblx0XHRcdGNvbmZpZy5hcmlhICYmIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCBjb25maWcubWVudSk7XG5cdFx0XHRjb25maWcuYXJpYSAmJiB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJywgdHJ1ZSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdG9wZW4oKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXN0YXRlJywgdHJ1ZSk7XG5cdFx0XHRjb25maWcuYXJpYSAmJiB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgdHJ1ZSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHRcdGNsb3NlKCkge1xuXHRcdFx0dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScsIGZhbHNlKTtcblx0XHRcdGNvbmZpZy5hcmlhICYmIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBmYWxzZSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXHR9O1xuXG5cblx0Y29uc3Qgc2hhZG93ID0ge1xuXHRcdGluaXQoKSB7XG5cdFx0XHR0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdHRoaXMuZWxlbWVudC5pZCA9IGNvbmZpZy5tZW51Kyctc2hhZG93Jztcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2hzbCgwLCAwJSwgMCUpJztcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSAwO1xuXHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLmxlZnQgPSAwO1xuXHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLnpJbmRleCA9IGNvbmZpZy56SW5kZXggLSAxO1xuXHRcdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3dpYmUuY2xvc2UpO1xuXHRcdFx0Y29uZmlnLmFyaWEgJiYgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTtcblx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cdFx0b3BlbigpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9ICcxMDB2dyc7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMHZoJztcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gY29uZmlnLnNoYWRvd09wYWNpdHk7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IGVhc2UtaW4tb3V0LCBoZWlnaHQgc3RlcC1zdGFydCwgd2lkdGggc3RlcC1zdGFydCc7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gY29uZmlnLnRpbWUgKyAnbXMnO1xuXHRcdFx0dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zdGF0ZScsIHRydWUpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblx0XHRjbG9zZSgpIHtcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IDA7XG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gMDtcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gMDtcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgZWFzZS1pbi1vdXQsIGhlaWdodCBzdGVwLWVuZCwgd2lkdGggc3RlcC1lbmQnO1xuXHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGNvbmZpZy50aW1lICsgJ21zJztcblx0XHRcdHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RhdGUnLCBmYWxzZSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdH07XG5cblxuXHRjb25zdCBpbnRlcmFjdGlvbiA9IHtcblx0XHR0YXAoZXZlbnQpIHtcblx0XHRcdGxldCB0YXAgPSBldmVudC50b3VjaGVzWzBdO1xuXHRcdFx0dGhpcy50YXBYID0gdGFwLmNsaWVudFg7XG5cdFx0XHR0aGlzLnRhcFkgPSB0YXAuY2xpZW50WTtcblx0XHRcdHRoaXMuc2xpZGVYID0gdGhpcy50YXBYO1xuXHRcdFx0dGhpcy5zbGlkZVkgPSB0aGlzLnRhcFk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0c2xpZGUoZXZlbnQpIHtcblx0XHRcdGxldCBzbGlkZSA9IGV2ZW50LnRvdWNoZXNbMF07XG5cdFx0XHR0aGlzLnNsaWRlWCA9IHNsaWRlLmNsaWVudFg7XG5cdFx0XHR0aGlzLnNsaWRlWSA9IHNsaWRlLmNsaWVudFk7XG5cblx0XHRcdGlmICghc3RhdGUpIHtcblx0XHRcdFx0aWYgKGludGVyYWN0aW9uLmdyZS5vcGVuKHRoaXMudGFwWCwgdGhpcy50YXBZLCB0aGlzLnNsaWRlWCwgdGhpcy5zbGlkZVkpKSB7XG5cdFx0XHRcdFx0c3dpYmUub3BlbigpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChpbnRlcmFjdGlvbi5ncmUuY2xvc2UodGhpcy50YXBYLCB0aGlzLnRhcFksIHRoaXMuc2xpZGVYLCB0aGlzLnNsaWRlWSkpIHtcblx0XHRcdFx0XHRzd2liZS5jbG9zZSgpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0a2V5cHJlc3MoZXZlbnQpIHtcblx0XHRcdGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIgJiYgc3RhdGUpIHtcblx0XHRcdFx0c3dpYmUuY2xvc2UoKTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdC8vIFN3aWJlIEdlc3R1cmUgUmVjb2duaXRpb24gRW5naW5lXG5cdFx0Z3JlOiB7XG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgY29uZGl0aW9ucyBhcmUgcmlnaHQgdG8gb3BlbiB0aGUgbWVudVxuXHRcdFx0b3Blbih0YXBYLCB0YXBZLCBzbGlkZVgsIHNsaWRlWSkge1xuXHRcdFx0XHR0aGlzLm9wZW5Db25kMSA9IHRhcFggPCAyMDtcblx0XHRcdFx0dGhpcy5vcGVuQ29uZDIgPSBzbGlkZVggPiB0YXBYO1xuXG5cdFx0XHRcdGlmICh0aGlzLm9wZW5Db25kMSAmJiB0aGlzLm9wZW5Db25kMikge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fTtcblx0XHRcdH0sXG5cblx0XHRcdC8vIENoZWNrIGlmIHRoZSBjb25kaXRpb25zIGFyZSByaWdodCB0byBjbG9zZSB0aGUgbWVudVxuXHRcdFx0Y2xvc2UodGFwWCwgdGFwWSwgc2xpZGVYLCBzbGlkZVkpIHtcblx0XHRcdFx0dGhpcy5kaXN0WCA9IHNsaWRlWCAtIHRhcFg7XG5cdFx0XHRcdHRoaXMuZGlzdFkgPSBzbGlkZVkgLSB0YXBZO1xuXHRcdFx0XHR0aGlzLmFuZ2xlID0gKChNYXRoLmF0YW4odGhpcy5kaXN0WSAvIHRoaXMuZGlzdFgpICogMTgwKSAvIE1hdGguUEkpICsgOTA7XG5cblx0XHRcdFx0dGhpcy5jbG9zZUNvbmQxID0gc2xpZGVYIDwgdGFwWDtcblx0XHRcdFx0dGhpcy5jbG9zZUNvbmQyID0gdGhpcy5kaXN0WSA8IDI4MDtcblx0XHRcdFx0dGhpcy5jbG9zZUNvbmQzID0gdGhpcy5kaXN0WCA8IC0zMDtcblx0XHRcdFx0dGhpcy5jbG9zZUNvbmQ0ID0gdGhpcy5hbmdsZSA+ICg5MCAtIDM1KTtcblx0XHRcdFx0dGhpcy5jbG9zZUNvbmQ1ID0gdGhpcy5hbmdsZSA8ICg5MCArIDM1KTtcblxuXHRcdFx0XHRpZiAodGhpcy5jbG9zZUNvbmQxICYmIHRoaXMuY2xvc2VDb25kMiAmJiB0aGlzLmNsb3NlQ29uZDMgJiYgdGhpcy5jbG9zZUNvbmQ0ICYmIHRoaXMuY2xvc2VDb25kNSkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblxuXHRjb25zdCByZXNwb25zaXZlID0ge1xuXHRcdG1lZGlhUXVlcnk6IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiAnICsgY29uZmlnLmJyZWFrcG9pbnQgKyAncHgpJyksXG5cdFx0Y2hlY2tNZWRpYVF1ZXJ5KGV2ZW50KSB7XG5cdFx0XHRpZiAoZXZlbnQubWF0Y2hlcykge1xuXHRcdFx0XHRzd2liZS5hZGRMaXN0ZW5lcnMoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN3aWJlLmNsb3NlKCk7XG5cdFx0XHRcdHN3aWJlLnJlbW92ZUxpc3RlbmVycygpO1xuXHRcdFx0fTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fTtcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9